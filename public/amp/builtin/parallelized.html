<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.104.2" />
    <meta name="description" content="Amazon SageMaker Workshop">
<meta name="author" content="Daniele Stroppa">

    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>Parallelized Data Distribution :: Amazon SageMaker Workshop</title>

    
    <link href="/css/nucleus.css?1668967201" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1668967201" rel="stylesheet">
    <link href="/css/hybrid.css?1668967201" rel="stylesheet">
    <link href="/css/featherlight.min.css?1668967201" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1668967201" rel="stylesheet">
    <link href="/css/auto-complete.css?1668967201" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1668967201" rel="stylesheet">
    <link href="/css/theme.css?1668967201" rel="stylesheet">
    <link href="/css/tabs.css?1668967201" rel="stylesheet">
    <link href="/css/hugo-theme.css?1668967201" rel="stylesheet">
    
    <link href="/css/theme-mine.css?1668967201" rel="stylesheet">
    
    

    <script src="/js/jquery-3.3.1.min.js?1668967201"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/amp/builtin/parallelized.html">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a href = "https://sagemaker-workshop.netlify.app/"><img alt = "Smartworkz Logo" src="/images/smartworkz.png"><b>Amazon SageMaker Workshop</b></a>   
<script async defer src="https://buttons.github.io/buttons.js"></script>
<script src="https://kit.fontawesome.com/d9c6148b9d.js" crossorigin="anonymous"></script>


    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1668967201"></script>
<script type="text/javascript" src="/js/auto-complete.js?1668967201"></script>
<script type="text/javascript">
    
        var baseurl = "\/";
    
</script>
<script type="text/javascript" src="/js/search.js?1668967201"></script>

    
  </div>
  

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/introduction.html" title="Introduction" class="dd-item
        
        
        
        ">
      <a href="/introduction.html">
          Introduction
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/amp/introduction/concepts.html" title="Machine Learning" class="dd-item ">
        <a href="/amp/introduction/concepts.html">
        Machine Learning
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/introduction/notebook.html" title="Create a Notebook Instance" class="dd-item ">
        <a href="/amp/introduction/notebook.html">
        Create a Notebook Instance
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/airflow.html" title="Airflow Integration" class="dd-item
        
        
        
        ">
      <a href="/airflow.html">
          Airflow Integration
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/amp/airflow/introduction.html" title="Introduction" class="dd-item ">
        <a href="/amp/airflow/introduction.html">
        Introduction
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/airflow/highlevel.html" title="High-Level Solution" class="dd-item ">
        <a href="/amp/airflow/highlevel.html">
        High-Level Solution
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/airflow/airflowconcepts.html" title="Airflow Concepts" class="dd-item ">
        <a href="/amp/airflow/airflowconcepts.html">
        Airflow Concepts
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/airflow/airflowsetup.html" title="Airflow Setup" class="dd-item ">
        <a href="/amp/airflow/airflowsetup.html">
        Airflow Setup
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/airflow/buildingworkflow.html" title="Building an ML Workflow" class="dd-item ">
        <a href="/amp/airflow/buildingworkflow.html">
        Building an ML Workflow
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/airflow/puttingalltogether.html" title="Putting it all together" class="dd-item ">
        <a href="/amp/airflow/puttingalltogether.html">
        Putting it all together
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/airflow/cleanup.html" title="Clean up" class="dd-item ">
        <a href="/amp/airflow/cleanup.html">
        Clean up
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/airflow/conclusion.html" title="Conclusion" class="dd-item ">
        <a href="/amp/airflow/conclusion.html">
        Conclusion
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/personalize.html" title="Amazon Personalize" class="dd-item
        
        
        
        ">
      <a href="/personalize.html">
          Amazon Personalize
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/personalize/lite.html" title="Lite Version" class="dd-item
        
        
        
        ">
      <a href="/personalize/lite.html">
          Lite Version
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/amp/personalize/lite/introduction.html" title="Introduction" class="dd-item ">
        <a href="/amp/personalize/lite/introduction.html">
        Introduction
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/personalize/lite/building.html" title="Building Your Environment" class="dd-item ">
        <a href="/amp/personalize/lite/building.html">
        Building Your Environment
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/personalize/lite/cloudformation.html" title="Cloud Formation Wizard" class="dd-item ">
        <a href="/amp/personalize/lite/cloudformation.html">
        Cloud Formation Wizard
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/personalize/lite/agenda.html" title="Agenda" class="dd-item ">
        <a href="/amp/personalize/lite/agenda.html">
        Agenda
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/personalize/lite/using.html" title="Using the Notebooks" class="dd-item ">
        <a href="/amp/personalize/lite/using.html">
        Using the Notebooks
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/personalize/lite/clean.html" title="After the Notebooks" class="dd-item ">
        <a href="/amp/personalize/lite/clean.html">
        After the Notebooks
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/personalize/full.html" title="Full Version" class="dd-item
        
        
        
        ">
      <a href="/personalize/full.html">
          Full Version
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/amp/personalize/full/overview.html" title="Overview" class="dd-item ">
        <a href="/amp/personalize/full/overview.html">
        Overview
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/personalize/full/deploy.html" title="Deploy the App" class="dd-item ">
        <a href="/amp/personalize/full/deploy.html">
        Deploy the App
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/personalize/full/setup.html" title="Setup your Jupyter Notebook" class="dd-item ">
        <a href="/amp/personalize/full/setup.html">
        Setup your Jupyter Notebook
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/personalize/full/parallel.html" title="Creating Parallel Solutions" class="dd-item ">
        <a href="/amp/personalize/full/parallel.html">
        Creating Parallel Solutions
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/personalize/full/videorecommendation.html" title="Configure the Video Recommendation App" class="dd-item ">
        <a href="/amp/personalize/full/videorecommendation.html">
        Configure the Video Recommendation App
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/personalize/full/runvideorecommendation.html" title="Running the Video Recommendation App" class="dd-item ">
        <a href="/amp/personalize/full/runvideorecommendation.html">
        Running the Video Recommendation App
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/personalize/full/additionalpersonalize.html" title="Create Additional Personalize Campaigns" class="dd-item ">
        <a href="/amp/personalize/full/additionalpersonalize.html">
        Create Additional Personalize Campaigns
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/personalize/full/plugin.html" title="Plug In the Recommendation Model(s)" class="dd-item ">
        <a href="/amp/personalize/full/plugin.html">
        Plug In the Recommendation Model(s)
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/personalize/full/additionalcampaigns.html" title="Additional Campaigns to Build" class="dd-item ">
        <a href="/amp/personalize/full/additionalcampaigns.html">
        Additional Campaigns to Build
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/personalize/full/closing.html" title="Cleaning up" class="dd-item ">
        <a href="/amp/personalize/full/closing.html">
        Cleaning up
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/personalize/full/conclusion.html" title="Conclusion" class="dd-item ">
        <a href="/amp/personalize/full/conclusion.html">
        Conclusion
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/prerequisites.html" title="Prerequisites" class="dd-item
        
        
        
        ">
      <a href="/prerequisites.html">
          Prerequisites
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/amp/prerequisites/prerequisites.html" title="Environment" class="dd-item ">
        <a href="/amp/prerequisites/prerequisites.html">
        Environment
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/prerequisites/jupyter.html" title="Jupyter Notebooks" class="dd-item ">
        <a href="/amp/prerequisites/jupyter.html">
        Jupyter Notebooks
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/prerequisites/cloud9.html" title="Cloud9 Setup" class="dd-item ">
        <a href="/amp/prerequisites/cloud9.html">
        Cloud9 Setup
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/start.html" title="SageMaker" class="dd-item
        
        
        
        ">
      <a href="/start.html">
          SageMaker
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/amp/start/create.html" title="Create the Notebook" class="dd-item ">
        <a href="/amp/start/create.html">
        Create the Notebook
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/start/clone.html" title="Clone the Service Repos" class="dd-item ">
        <a href="/amp/start/clone.html">
        Clone the Service Repos
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/step.html" title="Step Functions" class="dd-item
        
        
        
        ">
      <a href="/step.html">
          Step Functions
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/amp/step/upload.html" title="Upload the data to S3" class="dd-item ">
        <a href="/amp/step/upload.html">
        Upload the data to S3
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/step/crawler.html" title="Create the Crawler" class="dd-item ">
        <a href="/amp/step/crawler.html">
        Create the Crawler
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/step/gluejob.html" title="Create the Glue Job" class="dd-item ">
        <a href="/amp/step/gluejob.html">
        Create the Glue Job
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/step/orchestration.html" title="Orchestration" class="dd-item ">
        <a href="/amp/step/orchestration.html">
        Orchestration
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/step/createrole.html" title="Create Role" class="dd-item ">
        <a href="/amp/step/createrole.html">
        Create Role
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/step/trainmodel.html" title="Train Model Lambda" class="dd-item ">
        <a href="/amp/step/trainmodel.html">
        Train Model Lambda
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/step/awaitmodel.html" title="Await Model Lambda" class="dd-item ">
        <a href="/amp/step/awaitmodel.html">
        Await Model Lambda
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/step/deploymodel.html" title="Deploy Model Lambda" class="dd-item ">
        <a href="/amp/step/deploymodel.html">
        Deploy Model Lambda
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/step/usemodel.html" title="Use Model to Predict" class="dd-item ">
        <a href="/amp/step/usemodel.html">
        Use Model to Predict
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/step/createstep.html" title="Create Step Function" class="dd-item ">
        <a href="/amp/step/createstep.html">
        Create Step Function
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/step/schedule.html" title="Schedule the State Machine" class="dd-item ">
        <a href="/amp/step/schedule.html">
        Schedule the State Machine
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/step/cloudformation.html" title="Cloudformation Template" class="dd-item ">
        <a href="/amp/step/cloudformation.html">
        Cloudformation Template
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/builtin.html" title="Built-in Algorithms" class="dd-item
        parent
        
        
        ">
      <a href="/builtin.html">
          Built-in Algorithms
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/amp/builtin/xgboost.html" title="Video Game Sales Prediction with XGBoost" class="dd-item ">
        <a href="/amp/builtin/xgboost.html">
        Video Game Sales Prediction with XGBoost
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/builtin/resnet.html" title="Image Classification with ResNet" class="dd-item ">
        <a href="/amp/builtin/resnet.html">
        Image Classification with ResNet
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/builtin/rcf.html" title="Anomaly Detection with Random Cut Forest" class="dd-item ">
        <a href="/amp/builtin/rcf.html">
        Anomaly Detection with Random Cut Forest
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/builtin/parallelized.html" title="Parallelized Data Distribution" class="dd-item active">
        <a href="/amp/builtin/parallelized.html">
        Parallelized Data Distribution
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/custom.html" title="Custom Algorithms" class="dd-item
        
        
        
        ">
      <a href="/custom.html">
          Custom Algorithms
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/amp/custom/code.html" title="Submit custom code" class="dd-item ">
        <a href="/amp/custom/code.html">
        Submit custom code
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/custom/algo.html" title="Use your own custom algorithms" class="dd-item ">
        <a href="/amp/custom/algo.html">
        Use your own custom algorithms
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/custom/containers.html" title="Overview of containers for Amazon SageMaker" class="dd-item ">
        <a href="/amp/custom/containers.html">
        Overview of containers for Amazon SageMaker
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/security_for_sysops.html" title="Build Secure Environments" class="dd-item
        
        
        
        ">
      <a href="/security_for_sysops.html">
          Build Secure Environments
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/amp/security_for_sysops/scenario.html" title="Scenario" class="dd-item ">
        <a href="/amp/security_for_sysops/scenario.html">
        Scenario
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/security_for_sysops/tools.html" title="Tools" class="dd-item ">
        <a href="/amp/security_for_sysops/tools.html">
        Tools
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/security_for_sysops/security_overview.html" title="Security Overview" class="dd-item ">
        <a href="/amp/security_for_sysops/security_overview.html">
        Security Overview
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/security_for_sysops/best_practice.html" title="Codify Best Practice" class="dd-item
        
        
        
        ">
      <a href="/security_for_sysops/best_practice.html">
          Codify Best Practice
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/amp/security_for_sysops/best_practice/service_catalog.html" title="Self-Service with Guard Rails" class="dd-item ">
        <a href="/amp/security_for_sysops/best_practice/service_catalog.html">
        Self-Service with Guard Rails
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/security_for_sysops/best_practice/best_practice_lab.html" title="Lab 1: Best Practice as Code" class="dd-item ">
        <a href="/amp/security_for_sysops/best_practice/best_practice_lab.html">
        Lab 1: Best Practice as Code
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/security_for_sysops/team_resources.html" title="Project Environment" class="dd-item
        
        
        
        ">
      <a href="/security_for_sysops/team_resources.html">
          Project Environment
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/amp/security_for_sysops/team_resources/secure_networking.html" title="Secure Networking" class="dd-item ">
        <a href="/amp/security_for_sysops/team_resources/secure_networking.html">
        Secure Networking
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/security_for_sysops/team_resources/secure_environment_lab.html" title="Lab 2: Secure Environment" class="dd-item ">
        <a href="/amp/security_for_sysops/team_resources/secure_environment_lab.html">
        Lab 2: Secure Environment
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/security_for_sysops/secure_notebook.html" title="Working Securely" class="dd-item
        
        
        
        ">
      <a href="/security_for_sysops/secure_notebook.html">
          Working Securely
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/amp/security_for_sysops/secure_notebook/secure_notebook.html" title="Secure Notebooks" class="dd-item ">
        <a href="/amp/security_for_sysops/secure_notebook/secure_notebook.html">
        Secure Notebooks
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/security_for_sysops/secure_notebook/secure_notebook_lab.html" title="Lab 3: Deploy a Jupyter Notebook" class="dd-item ">
        <a href="/amp/security_for_sysops/secure_notebook/secure_notebook_lab.html">
        Lab 3: Deploy a Jupyter Notebook
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/security_for_sysops/detective.html" title="Detection and Remediation" class="dd-item
        
        
        
        ">
      <a href="/security_for_sysops/detective.html">
          Detection and Remediation
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/amp/security_for_sysops/detective/detective_controls.html" title="Detective Controls" class="dd-item ">
        <a href="/amp/security_for_sysops/detective/detective_controls.html">
        Detective Controls
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/security_for_sysops/detective/detective_lab.html" title="Lab 4: Detective and Corrective Controls" class="dd-item ">
        <a href="/amp/security_for_sysops/detective/detective_lab.html">
        Lab 4: Detective and Corrective Controls
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/security_for_sysops/preventive.html" title="Prevention" class="dd-item
        
        
        
        ">
      <a href="/security_for_sysops/preventive.html">
          Prevention
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/amp/security_for_sysops/preventive/preventive_controls.html" title="Preventive Controls" class="dd-item ">
        <a href="/amp/security_for_sysops/preventive/preventive_controls.html">
        Preventive Controls
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/security_for_sysops/preventive/preventive_lab.html" title="Lab 5: Preventive Controls" class="dd-item ">
        <a href="/amp/security_for_sysops/preventive/preventive_lab.html">
        Lab 5: Preventive Controls
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/security_for_sysops/summary.html" title="Summary" class="dd-item ">
        <a href="/amp/security_for_sysops/summary.html">
        Summary
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/security_for_sysops/faq.html" title="Frequently Asked Questions" class="dd-item ">
        <a href="/amp/security_for_sysops/faq.html">
        Frequently Asked Questions
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/security_for_users.html" title="Use Secure Environments" class="dd-item
        
        
        
        ">
      <a href="/security_for_users.html">
          Use Secure Environments
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/amp/security_for_users/scenario.html" title="Scenario" class="dd-item ">
        <a href="/amp/security_for_users/scenario.html">
        Scenario
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/security_for_users/tools.html" title="Tools &amp; Knowledge Check" class="dd-item ">
        <a href="/amp/security_for_users/tools.html">
        Tools &amp; Knowledge Check
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/security_for_users/security_overview.html" title="Security Overview" class="dd-item ">
        <a href="/amp/security_for_users/security_overview.html">
        Security Overview
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/security_for_users/environment.html" title="Deploy a Secure Environment" class="dd-item
        
        
        
        ">
      <a href="/security_for_users/environment.html">
          Deploy a Secure Environment
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/amp/security_for_users/environment/secure_notebook.html" title="Secure Notebooks" class="dd-item ">
        <a href="/amp/security_for_users/environment/secure_notebook.html">
        Secure Notebooks
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/security_for_users/environment/env_deploy_lab.html" title="Lab 01: Deploy the environment" class="dd-item ">
        <a href="/amp/security_for_users/environment/env_deploy_lab.html">
        Lab 01: Deploy the environment
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/security_for_users/environment/secure_notebook_lab.html" title="Lab 02: Deploy a Notebook" class="dd-item ">
        <a href="/amp/security_for_users/environment/secure_notebook_lab.html">
        Lab 02: Deploy a Notebook
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/security_for_users/notebook.html" title="Secure Data Science Notebooks" class="dd-item
        
        
        
        ">
      <a href="/security_for_users/notebook.html">
          Secure Data Science Notebooks
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/amp/security_for_users/notebook/ml_lifecycle.html" title="Security Objectives" class="dd-item ">
        <a href="/amp/security_for_users/notebook/ml_lifecycle.html">
        Security Objectives
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/security_for_users/notebook/notebook_lab_01.html" title="Lab 03: Data Science Workflow" class="dd-item ">
        <a href="/amp/security_for_users/notebook/notebook_lab_01.html">
        Lab 03: Data Science Workflow
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/security_for_users/notebook/notebook_lab_02.html" title="Lab 04: DevOps Workflow" class="dd-item ">
        <a href="/amp/security_for_users/notebook/notebook_lab_02.html">
        Lab 04: DevOps Workflow
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/security_for_users/summary.html" title="Summary" class="dd-item ">
        <a href="/amp/security_for_users/summary.html">
        Summary
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/security_for_users/faq.html" title="Frequently Asked Questions" class="dd-item ">
        <a href="/amp/security_for_users/faq.html">
        Frequently Asked Questions
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/cleanup.html" title="Cleanup" class="dd-item
        
        
        
        ">
      <a href="/cleanup.html">
          Cleanup
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/amp/cleanup/sagemaker.html" title="SageMaker Resources" class="dd-item ">
        <a href="/amp/cleanup/sagemaker.html">
        SageMaker Resources
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/amp/cleanup/workspace.html" title="Cleanup the Workspace" class="dd-item ">
        <a href="/amp/cleanup/workspace.html">
        Cleanup the Workspace
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/conclusion.html" title="Conclusion" class="dd-item
        
        
        
        ">
      <a href="/conclusion.html">
          Conclusion
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/amp/conclusion/conclusion.html" title="What Have We Accomplished" class="dd-item ">
        <a href="/amp/conclusion/conclusion.html">
        What Have We Accomplished
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
        
    </ul>

    
    
      <section id="shortcuts">
        <h3></h3>
        <ul>
          
              <li>
                  <a class="padding" href="https://www.smartworkz.nl"><i class='fa-solid fa-globe'></i> Web site</a>
              </li>
          
              <li>
                  <a class="padding" href="https://www.linkedin.com/company/smartworkznl"><i class='fa-brands fa-linkedin'></i> LinkedIn</a>
              </li>
          
              <li>
                  <a class="padding" href="https://github.com/smartworkz-kyriacos/sagemaker-workshop.git"><i class='fa-brands fa-github'></i> GitHub</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <left>
    <h5 class="copyright">&copy; 2022 Smartworkz Cloud Consultants</h5>
    
    <h5 class="legal"><a href="/">Privacy</a> &nbsp;|&nbsp; <a href="/">Site terms</a></h5>

</left>

<script async defer src="https://buttons.github.io/buttons.js"></script>
<script src="https://kit.fontawesome.com/d9c6148b9d.js" crossorigin="anonymous"></script>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/amp/'>Amazon Sagemaker Workshop</a> > <a href='/builtin.html'>Built-in Algorithms</a> > Parallelized Data Distribution
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#exploratory-data-analysis">Exploratory Data Analysis</a></li>
        <li><a href="#model-training">Model Training</a></li>
        <li><a href="#model-creation">Model Creation</a></li>
        <li><a href="#model-serving-and-evaluation">Model Serving and Evaluation</a></li>
        <li><a href="#conclusion--extensions">Conclusion &amp; Extensions</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Parallelized Data Distribution
            </h1>
          

        


<p>SageMaker makes it easy to train machine learning models across a cluster containing a large number of machines. This a non-trivial process, but SageMaker&rsquo;s built-in algorithms and pre-built MXNet and TensorFlow containers hide most of the complexity from you. Nevertheless, there are decisions about how to structure data that will have implications regarding how the distributed training is carried out.</p>
<p>In this section, you will learn about how to take full advantage of distributed training clusters when using one of SageMaker&rsquo;s built-in algorithms. This section also shows how to use SageMaker&rsquo;s built-in algorithms via hosted Jupyter notebooks, the AWS CLI, and the SageMaker console.</p>
<h3 id="exploratory-data-analysis">Exploratory Data Analysis</h3>
<ol>
<li>
<p>Download the <a href="../notebooks/data_distribution_types.ipynb">data_distribution_types.ipynb</a> notebook.</p>
</li>
<li>
<p>Access the SageMaker notebook instance you created earlier. Click the <strong>New</strong> button on the right and select <strong>Folder</strong>.</p>
</li>
<li>
<p>Click the checkbox next to your new folder, click the <strong>Rename</strong> button above in the menu bar, and give the folder a name such as &lsquo;<em>distributed-data</em>&rsquo;.</p>
</li>
<li>
<p>Click the folder to enter it.</p>
</li>
<li>
<p>To upload the notebook, click the <strong>Upload</strong> button on the right. Then in the file selection popup, select the file &lsquo;<em>data_distribution_types.ipynb</em>&rsquo; from the folder on your computer where you downloadeded it earlier. Click the blue <strong>Upload</strong> button that appears to the right of the notebook&rsquo;s file name.</p>
</li>
<li>
<p>You are now ready to begin the notebook. Click the notebook&rsquo;s file name to open it.</p>
</li>
<li>
<p>In the <code>bucket = '&lt;your_s3_bucket_name_here&gt;'</code> code line, paste the name of the S3 bucket you created in Module 1 to replace <code>&lt;your_s3_bucket_name_here&gt;</code>.  The code line should now read similar to <code>bucket = 'smworkshop-john-smith'</code>.  Do NOT paste the entire path (s3://&hellip;&hellip;.), just the bucket name.</p>
</li>
</ol>
<ul>
<li>
<p>In this workshop, you also will be accessing a S3 bucket that holds data from one of the AWS Public Data Sets.</p>
</li>
<li>
<p>If you followed the <a href="../introduction/notebook.html"><strong>Creating a Notebook Instance</strong></a> module to create your notebook instance, you should be able to access this S3 bucket. Otherwise, if you are using your own notebook instance created elsewhere, you may need to modify the associated IAM role to add permissions for <code>s3:ListBucket</code> for <code>arn:aws:s3:::gdelt-open-data</code>, and <code>s3:GetObject</code> for <code>arn:aws:s3:::gdelt-open-data/*</code>.</p>
</li>
</ul>
<ol start="7">
<li>Follow the directions in the notebook.  When it is time to set up a training job, return from the notebook to these instructions.</li>
</ol>
<h3 id="model-training">Model Training</h3>
<ol>
<li>Now that we have our data in S3, you can begin training. You&rsquo;ll use SageMaker&rsquo;s built-in <a href="https://docs.aws.amazon.com/sagemaker/latest/dg/linear-learner.html">Linear Learner</a> algorithm. Since the focus of this module is data distribution to a training cluster, you&rsquo;ll fit two models in order to compare data distribution types:</li>
</ol>
<ul>
<li>
<p>In the first job, you&rsquo;ll use <code>FullyReplicated</code> for your <code>train</code> channel. This will pass every file in the input S3 location to every machine (in this case you&rsquo;ll be using 5 machines).</p>
</li>
<li>
<p>In the second job, you&rsquo;ll use <code>ShardedByS3Key</code> for the <code>train</code> channel (note that you&rsquo;ll keep <code>FullyReplicated</code> for the validation channel). So, for the training data, you&rsquo;ll pass each S3 object to a separate machine. Since there are 5 files in the dataset (one for each year), you&rsquo;ll train on 5 machines, meaning each machine will get a year&rsquo;s worth of records.</p>
<blockquote>
<p>You&rsquo;ll be using the AWS CLI and Bash scripts to run the training jobs. Using the AWS CLI and scripts is an excellent way to automate machine learning pipelines and repetitive tasks, such as periodic training jobs. If you haven&rsquo;t done so already, please set up and open your Cloud9 environment now as described in <a href="../prerequisites/cloud9.html"><strong>Cloud9 Setup</strong></a>. Below is a screenshot of what your Cloud9 environment should look like as you create the first script below and run the related commands.  Step-by-step instructions follow.</p>
</blockquote>
<p><img src="/images/sm-dev-environment.png" alt="Cloud9"></p>
</li>
</ul>
<ol start="2">
<li>
<p>Create a text file named <code>replicated.sh</code>. If you haven&rsquo;t done so already, open a terminal/command window that supports Bash to enter commands. In the terminal window, change to the directory in which you created the file (if you&rsquo;re not already there), then run the following command:</p>
<pre tabindex="0"><code>chmod +x replicated.sh
</code></pre></li>
<li>
<p>Paste the bash script below into the <code>replicated.sh</code> file, and then change the text in the angle brackets (&lt; &gt;) as follows.  Do NOT put quotes around the values you insert, or retain the brackets.</p>
</li>
</ol>
<ul>
<li>
<p><strong>arn_role</strong>:  To get the value for this variable, go to the SageMaker console, click <strong>Notebook instances</strong> in the left pane, then in the &lsquo;Notebook instances&rsquo; table, click the name of the instance you created for this workshop.  In the <strong>Notebook instance settings</strong> section, look for the &lsquo;IAM role ARN&rsquo; value, and copy its text. It should look like the following:  <code>arn:aws:iam::1234567890:role/service-role/AmazonSageMaker-ExecutionRole-20171211T211964</code>.</p>
</li>
<li>
<p><strong>training_image</strong>:  select one of the following, depending on the AWS Region where you are running this workshop.</p>
<ul>
<li>N. Virginia:  382416733822.dkr.ecr.us-east-1.amazonaws.com/linear-learner:latest</li>
<li>Oregon:  174872318107.dkr.ecr.us-west-2.amazonaws.com/linear-learner:latest</li>
<li>Ohio:  404615174143.dkr.ecr.us-east-2.amazonaws.com/linear-learner:latest</li>
<li>Ireland:  438346466558.dkr.ecr.eu-west-1.amazonaws.com/linear-learner:latest</li>
</ul>
</li>
<li>
<p><strong>bucket</strong>:  the name of the S3 bucket you used in your notebook.  It should look like:  <code>s3://smworkshop-john-smith</code>.</p>
</li>
<li>
<p><strong>region</strong>:  the region code for the region where you are running this workshop, either <code>us-east-1</code> for N. Virginia, <code>us-west-2</code> for Oregon, <code>us-east-2</code> for Ohio, or <code>eu-west-1</code> for Ireland.</p>
<pre tabindex="0"><code># Fill in the values of these four variables
arn_role=&lt;arn-of-your-notebook-role&gt;
training_image=&lt;training-image-for-region&gt;
bucket=&lt;name-of-your-s3-bucket&gt;
region=&lt;your-region&gt;

prefix=/sagemaker/data_distribution_types
training_job_name=linear-replicated-`date &#39;+%Y-%m-%d-%H-%M-%S&#39;`

training_data=$bucket$prefix/train
eval_data=$bucket$prefix/validation
train_source={S3DataSource={S3DataType=S3Prefix,S3DataDistributionType=FullyReplicated,S3Uri=$training_data}}
eval_source={S3DataSource={S3DataType=S3Prefix,S3DataDistributionType=FullyReplicated,S3Uri=$eval_data}}

aws --region $region \
sagemaker create-training-job \
--role-arn $arn_role \
--training-job-name $training_job_name \
--algorithm-specification TrainingImage=$training_image,TrainingInputMode=File \
--resource-config InstanceCount=5,InstanceType=ml.c4.2xlarge,VolumeSizeInGB=10 \
--input-data-config ChannelName=train,DataSource=$train_source,CompressionType=None,RecordWrapperType=None ChannelName=validation,DataSource=$eval_source,CompressionType=None,RecordWrapperType=None \
--output-data-config S3OutputPath=$bucket$prefix \
--hyper-parameters feature_dim=25,mini_batch_size=500,predictor_type=regressor,epochs=2,num_models=32,loss=absolute_loss \
--stopping-condition MaxRuntimeInSeconds=1800
</code></pre></li>
</ul>
<ol start="11">
<li>Save your file, then in your terminal window, run the following command to start the training job. Total job duration may last up to about 10 minutes, including time for setting up the training cluster. In case the training job encounters problems and is stuck, you can set a stopping condition that times out, in this case after a half hour. Now, since you can run another job concurrently with this one, move onto the next step after you start this job.</li>
</ol>
<pre><code>```
./replicated.sh  
```
</code></pre>
<ol start="12">
<li>
<p>For the next training job with the <code>ShardedByS3Key</code> distribution type, please create a text file named <code>sharded.sh</code>.  then run the following command in your terminal window:</p>
<pre tabindex="0"><code>chmod +x sharded.sh
</code></pre></li>
<li>
<p>Paste the bash script below into the <code>sharded.sh</code> file, and then change the text in the angle brackets (&lt; &gt;) as follows.  Do NOT put quotes around the values you insert, or retain the brackets. All four values to change are the same as the values you changed for the previous script; they are noted again below for your ease of reference.</p>
</li>
</ol>
<ul>
<li>
<p><strong>arn_role</strong>:  same as for the previous script. It should look like the following:  <code>arn:aws:iam::1234567890:role/service-role/AmazonSageMaker-ExecutionRole-20171211T211964</code>.</p>
</li>
<li>
<p><strong>training_image</strong>:  same as the previous script; the image depends on the AWS Region where you are running this workshop.  They are shown again here for convenience:</p>
<ul>
<li>N. Virginia:  382416733822.dkr.ecr.us-east-1.amazonaws.com/linear-learner:latest</li>
<li>Oregon:  174872318107.dkr.ecr.us-west-2.amazonaws.com/linear-learner:latest</li>
<li>Ohio:  404615174143.dkr.ecr.us-east-2.amazonaws.com/linear-learner:latest</li>
<li>Ireland:  438346466558.dkr.ecr.eu-west-1.amazonaws.com/linear-learner:latest</li>
</ul>
</li>
<li>
<p><strong>bucket</strong>:  same as for the previous script.  It should look like:  <code>s3://smworkshop-john-smith</code>.</p>
</li>
<li>
<p><strong>region</strong>:  the region code for the region where you are running this workshop, either <code>us-east-1</code> for N. Virginia, <code>us-west-2</code> for Oregon, <code>us-east-2</code> for Ohio, or <code>eu-west-1</code> for Ireland.</p>
<pre tabindex="0"><code># Fill in the values of these four variables
arn_role=&lt;arn-of-your-notebook-role&gt;
training_image=&lt;training-image-for-region&gt;
bucket=&lt;name-of-your-s3-bucket&gt;
region=&lt;your-region&gt;

prefix=/sagemaker/data_distribution_types
training_job_name=linear-sharded-`date &#39;+%Y-%m-%d-%H-%M-%S&#39;`

training_data=$bucket$prefix/train
eval_data=$bucket$prefix/validation
train_source={S3DataSource={S3DataType=S3Prefix,S3DataDistributionType=ShardedByS3Key,S3Uri=$training_data}}
eval_source={S3DataSource={S3DataType=S3Prefix,S3DataDistributionType=FullyReplicated,S3Uri=$eval_data}}

aws --region $region \
sagemaker create-training-job \
--role-arn $arn_role \
--training-job-name $training_job_name \
--algorithm-specification TrainingImage=$training_image,TrainingInputMode=File \
--resource-config InstanceCount=5,InstanceType=ml.c4.2xlarge,VolumeSizeInGB=10 \
--input-data-config ChannelName=train,DataSource=$train_source,CompressionType=None,RecordWrapperType=None ChannelName=validation,DataSource=$eval_source,CompressionType=None,RecordWrapperType=None \
--output-data-config S3OutputPath=$bucket$prefix \
--hyper-parameters feature_dim=25,mini_batch_size=500,predictor_type=regressor,epochs=2,num_models=32,loss=absolute_loss \
--stopping-condition MaxRuntimeInSeconds=1800
</code></pre></li>
</ul>
<ol start="14">
<li>Save your file, then in your terminal window, run the following command to start your second training job now, there is no need to wait for the first training job to complete:</li>
</ol>
<pre><code>```
./sharded.sh
```
</code></pre>
<ol start="15">
<li>In the SageMaker console, click <strong>Jobs</strong> in the left panel to check the status of the training jobs, which run concurrently.  When they are complete, their <strong>Status</strong> column will change from InProgress to Complete.  As a reminder, duration of these jobs can last up to about 10 minutes, including time for setting up the training cluster, as shown in the <strong>Duration</strong> column of the <strong>Jobs</strong> table.</li>
</ol>
<pre><code>&gt; To check the actual training time (not including cluster setup) for each job when both are complete, click the training job name in the jobs table, then examine the **Training duration** listed at the top right under **Job Settings**.  **Training duration** does not include the time related to cluster setup. As you can see, and might expect, the sharded distribution type trained substantially faster than the fully replicated type. This is a key differentiator to consider when preparing data and picking the distribution type.
</code></pre>
<h3 id="model-creation">Model Creation</h3>
<ol>
<li>Now that you&rsquo;ve trained your machine learning models, you&rsquo;ll want to make predictions by setting up a hosted endpoint for them. The first step in doing that is to create a SageMaker model object that wraps the actual model artifact from training. To create the model object, you will point to the model.tar.gz that came from training and the inference code container, then create the hosting model object.  You&rsquo;ll do this twice, once for each model you trained earlier. Here are the steps to do this via the SageMaker console (see screenshot below for an example of all relevant fields filled in for the Oregon AWS Region):</li>
</ol>
<ul>
<li>
<p>In the left pane of the SageMaker console home page, right click the <strong>Models</strong> link and open it in another tab of your browser.  Click the <strong>Create Model</strong> button at the upper right above the &lsquo;Models&rsquo; table.</p>
</li>
<li>
<p>For the &lsquo;Model name&rsquo; field under <strong>Model Settings</strong>, enter <code>distributed-replicated</code>.</p>
</li>
<li>
<p>For the &lsquo;Location of inference code image&rsquo; field under <strong>Primary Container</strong>, enter the name of the same Docker image you specified previously for the region where you&rsquo;re running this workshop. For ease of reference, here are the image names again:</p>
<ul>
<li>N. Virginia:  382416733822.dkr.ecr.us-east-1.amazonaws.com/linear-learner:latest</li>
<li>Oregon:  174872318107.dkr.ecr.us-west-2.amazonaws.com/linear-learner:latest</li>
<li>Ohio:  404615174143.dkr.ecr.us-east-2.amazonaws.com/linear-learner:latest</li>
<li>Ireland:  438346466558.dkr.ecr.eu-west-1.amazonaws.com/linear-learner:latest</li>
</ul>
</li>
<li>
<p>For the &lsquo;Location of model artifacts&rsquo; field under <strong>Primary Container</strong>, enter the path to the output of your replicated training job.  To find the path, go back to your first browser tab, click <strong>Jobs</strong> in the left pane, then find and click the replicated job name, which will look like <code>linear-replicated-&lt;date&gt;</code>.  Scroll down to the <strong>Outputs</strong> section, then copy the path under &lsquo;S3 model artifact&rsquo;.  Paste the path in the field; it should look like <code>s3://sagemaker-projects-pdx/sagemaker/data_distribution_types/linear-replicated-2018-03-11-18-13-13/output/model.tar.gz</code>.</p>
</li>
<li>
<p>Click <strong>Create model</strong> at the bottom of the page.</p>
</li>
<li>
<p>Repeat the above steps for the sharded training job model, except:  for &lsquo;Model name&rsquo;, enter <code>distributed-sharded</code>, and for &lsquo;Location of model artifacts&rsquo;, enter the path for the sharded training job model artifact.</p>
<p><img src="/images/sm-model.png" alt="Model"></p>
</li>
</ul>
<h3 id="model-serving-and-evaluation">Model Serving and Evaluation</h3>
<ol>
<li>Once you&rsquo;ve setup your models, you can configure what your hosting endpoints should be. Here you specify the EC2 instance type to use for hosting, the initial number of instances, and the hosting model name.  Again, you&rsquo;ll do this twice, once for each model we trained earlier. Here are the steps to do this via the SageMaker console (see screenshot below for an example of all relevant fields filled in for the Oregon AWS Region):</li>
</ol>
<ul>
<li>
<p>In the left pane of the SageMaker console, click <strong>Endpoint configuration</strong>.  Click the <strong>Create endpoint configuration</strong> button at the upper right above the &lsquo;Endpoint configuration&rsquo; table.</p>
</li>
<li>
<p>For the &lsquo;Endpoint configuration name&rsquo; field under <strong>New endpoint configuration</strong>, enter <code>distributed-replicated</code>.</p>
</li>
<li>
<p>Under <strong>Production variants</strong>, click <strong>Add model</strong>.  From the <strong>Add model</strong> popup, select the <code>distributed-replicated</code> model you created earlier, and click <strong>Save</strong>.  Then click <strong>Create endpoint configuration</strong> at the bottom of the page.</p>
</li>
<li>
<p>Repeat the above steps for the sharded training job model, except:  for &lsquo;Endpoint configuration name&rsquo;, enter <code>distributed-sharded</code>, and for the <strong>Add model</strong> popup, select the <code>distributed-sharded</code> model.</p>
<p><img src="/images/sm-endpoint-config.png" alt="Endpoint Configuration"></p>
</li>
</ul>
<ol>
<li>For the final step in the process of setting up endpoints, you&rsquo;ll use the SageMaker console to do so (see screenshot below for an example of all relevant fields filled in for the Oregon AWS Region):</li>
</ol>
<ul>
<li>
<p>In the left pane of the SageMaker console, click <strong>Endpoints</strong>.  Click the <strong>Create endpoint</strong> button at the upper right above the &lsquo;Endpoints&rsquo; table.</p>
</li>
<li>
<p>For the &lsquo;Endpoint name&rsquo; field under <strong>Endpoint</strong>, enter <code>distributed-replicated</code>.</p>
</li>
<li>
<p>Under <strong>Attach endpoint configuration</strong>, leave &lsquo;Use an existing endpoint configuration&rsquo; selected, then under <strong>Endpoint configuration</strong>, select <code>distributed-replicated</code> from the table, then click <strong>Select endpoint configuration</strong> at the bottom of the table.  Then click <strong>Create endpoint</strong> at the bottom of the page.</p>
</li>
<li>
<p>Repeat the above steps, except:  for &lsquo;Endpoint name&rsquo;, enter <code>distributed-sharded</code>, and for the <strong>Endpoint configuration</strong> table, select the <code>distributed-sharded</code> endpoint configuration.</p>
</li>
<li>
<p>In the <strong>Endpoints</strong> table, refer to the &lsquo;Status&rsquo; column, and wait for both endpoints to change from &lsquo;Creating&rsquo; to &lsquo;InService&rsquo; before proceeding to the next step. It will take several minutes for endpoint creation, possibly as long as ten minutes.</p>
<p><img src="/images/sm-endpoint.png" alt="Endpoint"></p>
</li>
</ul>
<ol>
<li>To compare predictions from your two models, let&rsquo;s return to the notebook you used earlier (jump to the &lsquo;<em>Evaluate</em>&rsquo; section).  When you are finished, return here and proceed to the next section.</li>
</ol>
<h3 id="conclusion--extensions">Conclusion &amp; Extensions</h3>
<p>In this module, you ran a regression on a relatively artificial example, and skipped some pre-processing steps along the way (like potentially transforming or winsorizing our target variable, looking for interations in our features, etc.). But the main point was to highlight the difference in training time and accuracy of a model trained through two different distribution methods.</p>
<p>Overall, sharding data into separate files and sending them to separate training nodes will run faster, but may produce lower accuracy than a model that replicates the data across all nodes. Naturally, this can be influenced by training the sharded model longer, with more epochs. And it should be noted that we trained with a very small number of epochs to highlight this difference.</p>
<p>Different algorithms can be expected to show variation in which distribution mechanism is most effective at achieving optimal compute spend per point of model accuracy. The message remains the same though, that the process of finding the right distribution type is another experiment in optimizing model training times.</p>


<footer class="footline">
	
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        

        


	 
	 
		
			<a class="nav nav-prev" href="/amp/builtin/rcf.html" title="Anomaly Detection with Random Cut Forest"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/custom.html" title="Custom Algorithms" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1668967201"></script>
    <script src="/js/perfect-scrollbar.min.js?1668967201"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1668967201"></script>
    <script src="/js/jquery.sticky.js?1668967201"></script>
    <script src="/js/featherlight.min.js?1668967201"></script>
    <script src="/js/highlight.pack.js?1668967201"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1668967201"></script>
    <script src="/js/learn.js?1668967201"></script>
    <script src="/js/hugo-learn.js?1668967201"></script>
    
        
            <script src="/mermaid/mermaid.js?1668967201"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-119576367-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script src="/js/shortbreadv1.js?1668967201"></script>
  </body>
</html>

